<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Implement SSH Keys | Samuël Lefebvre</title>
    <meta name="description" content="Curriculum vitæ, projets and more !">
    <script defer src="https://use.fontawesome.com/releases/v5.8.1/js/all.js"></script defer>
  <link rel="icon" href="/logo.png">
    
    <link rel="preload" href="/assets/css/0.styles.588dbf14.css" as="style"><link rel="preload" href="/assets/js/app.ede0306e.js" as="script"><link rel="preload" href="/assets/js/2.3d926da1.js" as="script"><link rel="preload" href="/assets/js/15.485449ba.js" as="script"><link rel="preload" href="/assets/js/5.ab3ceae1.js" as="script"><link rel="prefetch" href="/assets/js/10.cc18b150.js"><link rel="prefetch" href="/assets/js/11.83bcc1a5.js"><link rel="prefetch" href="/assets/js/12.08565800.js"><link rel="prefetch" href="/assets/js/13.188d81b5.js"><link rel="prefetch" href="/assets/js/14.47961eab.js"><link rel="prefetch" href="/assets/js/16.e639c7fd.js"><link rel="prefetch" href="/assets/js/17.a1ad4790.js"><link rel="prefetch" href="/assets/js/18.de435332.js"><link rel="prefetch" href="/assets/js/19.0f82c18e.js"><link rel="prefetch" href="/assets/js/20.f8fff90c.js"><link rel="prefetch" href="/assets/js/21.1238a22a.js"><link rel="prefetch" href="/assets/js/3.bff93082.js"><link rel="prefetch" href="/assets/js/4.b662f219.js"><link rel="prefetch" href="/assets/js/6.eb941da9.js"><link rel="prefetch" href="/assets/js/7.59979af3.js"><link rel="prefetch" href="/assets/js/8.19218a51.js"><link rel="prefetch" href="/assets/js/9.ae5237f1.js">
    <link rel="stylesheet" href="/assets/css/0.styles.588dbf14.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/en/" class="home-link router-link-active"><!----> <span class="site-name">Samuël Lefebvre</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/en/" class="nav-link">Home</a></div><div class="nav-item"><a href="/en/article/" class="nav-link router-link-active">Article</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">Français</a></li><li class="dropdown-item"><!----> <a href="/en/article/secure-access-with-ssh-keys.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/en/" class="nav-link">Home</a></div><div class="nav-item"><a href="/en/article/" class="nav-link router-link-active">Article</a></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Languages</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/" class="nav-link">Français</a></li><li class="dropdown-item"><!----> <a href="/en/article/secure-access-with-ssh-keys.html" class="nav-link router-link-exact-active router-link-active">English</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/en/article/" class="sidebar-link">Article</a></li><li><a href="/en/article/secure-access-with-ssh-keys.html" class="active sidebar-link">Implement SSH Keys</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/en/article/secure-access-with-ssh-keys.html#install-a-terminal" class="sidebar-link">Install a terminal</a></li><li class="sidebar-sub-header"><a href="/en/article/secure-access-with-ssh-keys.html#check-for-existing-ssh-keys" class="sidebar-link">Check for existing SSH keys</a></li><li class="sidebar-sub-header"><a href="/en/article/secure-access-with-ssh-keys.html#generate-new-ssh-keys" class="sidebar-link">Generate new SSH keys</a></li><li class="sidebar-sub-header"><a href="/en/article/secure-access-with-ssh-keys.html#copy-your-public-key-to-your-device" class="sidebar-link">Copy your public key to your device</a></li><li class="sidebar-sub-header"><a href="/en/article/secure-access-with-ssh-keys.html#disable-password-authentication" class="sidebar-link">Disable password authentication</a></li></ul></li></ul> </aside> <main class="page"> <div class="content default"><h1 id="how-to-implement-ssh-keys-in-ubuntu"><a href="#how-to-implement-ssh-keys-in-ubuntu" aria-hidden="true" class="header-anchor">#</a> How to implement SSH Keys in Ubuntu</h1> <p>SSH keys provide an easy, passwordless and secure way of logging into your server.</p> <p>The following tutorial has been tested on <em>Ubuntu 18.04.2 LTS (GNU/Linux 4.9.140-tegra aarch64)</em>.</p> <h2 id="install-a-terminal"><a href="#install-a-terminal" aria-hidden="true" class="header-anchor">#</a> Install a terminal</h2> <p>The following applications are recommended:</p> <ul><li>Linux
<ul><li>The terminal can be open with <kbd>CTRL</kbd>+<kbd>Alt</kbd>+<kbd>T</kbd></li></ul></li> <li>Windows
<ul><li><a href="https://chocolatey.org/packages/putty.install" target="_blank" rel="noopener noreferrer">PuTTY<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> PuTTY is a free implementation of Telnet and SSH for Windows and Unix platforms.</li> <li><a href="https://chocolatey.org/packages/git" target="_blank" rel="noopener noreferrer">Git BASH<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Git for Windows provides a BASH emulation used to run Git from the command line.</li></ul></li> <li>Android
<ul><li><a href="https://play.google.com/store/apps/details?id=com.sonelli.juicessh" target="_blank" rel="noopener noreferrer">JuiceSSH<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Free SSH client for Android.</li></ul></li></ul> <h2 id="check-for-existing-ssh-keys"><a href="#check-for-existing-ssh-keys" aria-hidden="true" class="header-anchor">#</a> Check for existing SSH keys</h2> <p>First, check whether there are already keys on the computer you are using:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> ~/.ssh
</code></pre></div><p>If you see files named <code>id_rsa.pub</code> or <code>id_dsa.pub</code> you have keys set up already, so you can <a href="#copy-your-public-key-to-your-device">skip ⏩</a> the generating keys step.</p> <h2 id="generate-new-ssh-keys"><a href="#generate-new-ssh-keys" aria-hidden="true" class="header-anchor">#</a> Generate new SSH keys</h2> <p>To generate new SSH keys enter the following command:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>ssh-keygen
</code></pre></div><p>Leave the field empty for no passphrase.<br>
Now look inside your .ssh directory:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">ls</span> ~/.ssh
</code></pre></div><p>and you should see the files <code>id_rsa</code> and <code>id_rsa.pub</code>:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>authorized_keys  id_rsa  id_rsa.pub  known_hosts
</code></pre></div><p>The <code>id_rsa</code> file is your private key.</p> <div class="warning custom-block"><p class="custom-block-title">Privacy warning</p> <p>Keep this on your computer. Do not share it!</p></div> <p>The <code>id_rsa.pub</code> file is your public key. This is what you share with machines you want to connect to. When the machine you try to connect to matches your public and private key, it will allow you to connect.</p> <h2 id="copy-your-public-key-to-your-device"><a href="#copy-your-public-key-to-your-device" aria-hidden="true" class="header-anchor">#</a> Copy your public key to your device</h2> <p>Copy the file manually over SSH:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">cat</span> ~/.ssh/id_rsa.pub <span class="token operator">|</span> <span class="token function">ssh</span> <span class="token operator">&lt;</span>USER<span class="token operator">&gt;</span>@<span class="token operator">&lt;</span>IP-ADDRESS<span class="token operator">&gt;</span> <span class="token string">&quot;cat &gt;&gt; ~/.ssh/authorized_keys&quot;</span>
</code></pre></div><p>or paste it from the clipboard. Replace <em>&lt;ID_RSA.PUB&gt;</em> by your key.</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token keyword">echo</span> <span class="token string">&quot;&lt;ID_RSA.PUB&gt;&quot;</span> <span class="token operator">&gt;&gt;</span> ~/.ssh/authorized_keys
</code></pre></div><div class="danger custom-block"><p class="custom-block-title">Do not overwrite your existing keys!</p> <p><strong>&gt;</strong> overwrite the file<br> <strong>&gt;&gt;</strong> append to the file</p></div> <p>Now try ssh <code>&lt;USER&gt;@&lt;IP-ADDRESS&gt;</code> and you should connect without a password prompt.</p> <h2 id="disable-password-authentication"><a href="#disable-password-authentication" aria-hidden="true" class="header-anchor">#</a> Disable password authentication</h2> <p>Force the usage for the SSH Keys in WAN and keep the password access in LAN.</p> <p>Edit the file <code>/etc/ssh/sshd_config</code></p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> <span class="token function">vim</span> /etc/ssh/sshd_config
</code></pre></div><p>Press <kbd>a</kbd> to edit in vim. Apply the fellow changes:</p> <div class="language-bash extra-class"><pre class="language-bash"><code>PasswordAuthentication no
ChallengeResponseAuthentication no

Match Address 192.168.0.0/16
    PasswordAuthentication <span class="token function">yes</span>
</code></pre></div><p>Save and close the file.</p> <blockquote><p>Press <kbd>ESC</kbd> and type <code>:wq</code></p></blockquote> <p>Reload the ssh server:</p> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">sudo</span> systemctl reload <span class="token function">ssh</span>
</code></pre></div><div class="tip custom-block"><p>There are two <a href="https://en.wikipedia.org/wiki/Motd_(Unix)" title="message of the day" target="_blank" rel="noopener noreferrer">motd<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, when connecting with the ssh keys.<br>
If you know how to fix this, please let me know.</p></div> <p>Done! 🎉</p></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">⏳️: </span> <span class="time">April 21, 2019 2:10 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/en/article/" class="prev router-link-active">
          Article
        </a></span> <!----></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.ede0306e.js" defer></script><script src="/assets/js/2.3d926da1.js" defer></script><script src="/assets/js/15.485449ba.js" defer></script><script src="/assets/js/5.ab3ceae1.js" defer></script>
  </body>
</html>
